tasks:
  - name: Rails
    init: >
      bundle install &&
      yarn install --check-files &&
      rails db:setup &&
      gp sync-done bundle
      # 'bundle' is an arbitrary name
    command: rails server

  - name: Webpack
    # wait for the above 'init' to finish
    init: gp sync-await bundle
    command: bin/webpack-dev-server

  - name: Redis
    init: gp sync-await bundle
    command: redis-server

  - name: Sidekiq
    init: gp sync-await bundle
    command: sidekiq